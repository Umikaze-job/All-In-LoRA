var N=Object.defineProperty;var B=(t,s,e)=>s in t?N(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var n=(t,s,e)=>(B(t,typeof s!="symbol"?s+"":s,e),e);import{g as m,A as d,d as U,m as A,a as $,b as S,_ as E,r as w,o as r,c,e as k,w as f,F as g,f as L,t as p,h as x,i as C,n as P,j as h,k as b,l as W,v as D}from"./index-f554547e.js";import{T as I}from"./template01-ba756e31.js";import{m as R}from"./mini-Button01-ed5526ec.js";import{m as F}from"./modal-textform01-21bc6371.js";import{f as j}from"./form-dropdown01-caf125da.js";import{m as z}from"./ModalItemComp-d2246648.js";class u{constructor(){n(this,"phase");n(this,"formValue");n(this,"errorid");n(this,"textColor");n(this,"formtype");n(this,"buttonName");n(this,"choices");this.phase=0,this.formValue="",this.errorid=0,this.textColor="text-white",this.formtype=0,this.buttonName="welcomePage.buttonName",this.choices=[]}changeText(s){switch(s){case 0:this.textColor="text-white";break;case 1:this.textColor="text-blue-400";break;case 2:this.textColor="text-rose-400";case 3:this.textColor="text-yellow-400"}}async init(s){}async isClicked(s){}async UseAxois(s,e){}}class H extends u{constructor(){super();n(this,"title");n(this,"contents");this.title="welcomePage.welcome.title",this.contents="welcomePage.welcome.contents"}}class K extends u{constructor(){super();n(this,"title");n(this,"contents");this.title="welcomePage.sdmodel.title",this.contents="welcomePage.sdmodel.contents",this.phase=1,this.formtype=1}async init(e){await this.UseAxois("",e)}async isClicked(e){if(this.formValue==""){this.contents="welcomePage.form01.NoWords",this.changeText(2);return}await this.UseAxois(this.formValue,e)}async UseAxois(e,o){const a=await o.post(m()+"/api/welcome-page/sd-models-folder",{folder_path:e});if(a.data.error!=null){d().setErrorMessage(a.data.error);return}a.data.isfolder?a.data.modelCount==0?(this.contents="welcomePage.sdmodel.nomodels",this.changeText(2),this.phase=2):(this.contents="welcomePage.sdmodel.already",this.changeText(1),this.phase=2):(this.contents="welcomePage.form01.notalready",this.changeText(0),this.phase=1)}}class q extends u{constructor(){super();n(this,"title");n(this,"contents");this.title="welcomePage.sdscripts.title",this.contents="welcomePage.sdscripts.contents",this.phase=1,this.formtype=1}async init(e){await this.UseAxois("",e)}async isClicked(e){if(this.formValue==""){this.contents="welcomePage.form01.NoWords",this.changeText(2);return}await this.UseAxois(this.formValue,e)}async UseAxois(e,o){const a=await o.post(m()+"/api/welcome-page/kohyass-folder",{folder_path:e});if(a.data.error!=null){d().setErrorMessage(a.data.error);return}a.data.isfolder!=null&&!a.data.isfolder?(this.contents="welcomePage.form01.notalready",this.changeText(0),this.phase=1):a.data.notrain!=null&&!a.data.notrain?(this.contents="welcomePage.sdscripts.notrain",this.changeText(3),this.phase=2):a.data.nosdxl!=null&&!a.data.nosdxl?(this.contents="welcomePage.sdscripts.sdxl",this.changeText(3),this.phase=2):(this.contents="welcomePage.form01.already",this.changeText(1),this.phase=2)}}class G extends u{constructor(){super();n(this,"title");n(this,"contents");this.title="welcomePage.lorafolder.title",this.contents="welcomePage.lorafolder.contents",this.phase=1,this.formtype=1}async init(e){await this.UseAxois("",e)}async isClicked(e){if(this.formValue==""){this.contents="welcomePage.form01.NoWords",this.changeText(2);return}await this.UseAxois(this.formValue,e)}async UseAxois(e,o){const a=await o.post(m()+"/api/welcome-page/lora-folder",{folder_path:e});if(a.data.error!=null){d().setErrorMessage(a.data.error);return}a.data.isfolder?(this.contents="welcomePage.form01.already",this.changeText(1),this.phase=2):(this.contents="welcomePage.form01.notalready",this.changeText(0),this.phase=1)}}class J extends u{constructor(){super();n(this,"title");n(this,"contents");this.title="welcomePage.settingMixedPrecision.title",this.contents="welcomePage.settingMixedPrecision.contents",this.buttonName="welcomePage.settingMixedPrecision.buttonName",this.phase=1,this.formtype=3,this.choices=["fp16","bf16"]}async init(e){const o=await e.post(m()+"/api/welcome-page/setting-mixed-precision",{isInit:!0});o.data.error!=null?d().setErrorMessage(o.data.error):o.data.result!="no"&&(this.phase=2,this.changeText(1),this.contents="welcomePage.settingMixedPrecision.isSelected")}async isClicked(e){const o=await e.post(m()+"/api/welcome-page/setting-mixed-precision",{isInit:!1,value:this.formValue});o.data.error!=null?d().setErrorMessage(o.data.error):o.data.result!="no"&&(this.phase=2,this.changeText(1),this.contents="welcomePage.settingMixedPrecision.isSelected")}}class O extends u{constructor(){super();n(this,"title");n(this,"contents");this.title="welcomePage.checkCudaCudnn.title",this.contents="welcomePage.checkCudaCudnn.contents",this.buttonName="welcomePage.checkCudaCudnn.buttonName",this.phase=1,this.formtype=2}async init(e){await this.execute(e)}async isClicked(e){await this.execute(e)}async execute(e){const o=await e.post(m()+"/api/welcome-page/check-cuda-cudnn");o.data.error!=null?d().setErrorMessage(o.data.error):o.data.result=="nocuda"?(this.phase=1,this.changeText(2),this.contents="welcomePage.checkCudaCudnn.nocuda"):o.data.result=="nocudnn"?(this.phase=1,this.changeText(2),this.contents="welcomePage.checkCudaCudnn.nocudnn"):(this.phase=2,this.changeText(1),this.contents="welcomePage.checkCudaCudnn.isChecked")}}const Q=U({setup(t,s){const{isModal:e,canModalCancel:o,canControl:a}=z();return{isModal:e,canModalCancel:o,canControl:a}},data(){return{window_data:[new H,new O,new K,new q,new G,new J],store:d()}},methods:{async WindowButtonClicked(t){this.canControl(!1),this.isModal=!0,await t.isClicked(this.axios),this.canControl(!0),this.isModal=!1}},computed:{canMakeLoRa(){return this.window_data.every(t=>t.phase==0||t.phase==2)}},watch:{canMakeLoRa:{handler:function(t){this.store.setCanMakeLoRa(t)},immediate:!0}},async created(){this.window_data.forEach(t=>{t.init(this.axios)})},components:{"base-tem":I,"mini-button":R,"modal-base":A,"modal-button":$,"modal-form":F,"modal-window":S,"form-dropdown01":j}}),X={class:"flex flex-col text-white font-Raleway flex-wrap max-h-[700px] w-full place-content-start"},Y={key:0,class:"border-winBorder border-white bg-NormalButtonColor rounded-md m-2 p-2 flex flex-col gap-2"},Z={class:"text-lg text-center"},ee=["onUpdate:modelValue"],te={key:3,class:"w-full flex justify-center"},se=["onClick"],oe=x("p",{class:"text-center text-xl underline decoration-myUnderLine01 py-8"},"Loading...",-1);function ae(t,s,e,o,a,ne){const _=w("modal-form"),M=w("base-tem"),v=w("modal-window"),T=w("modal-base");return r(),c(g,null,[k(M,null,{maintitle:f(()=>[L(p(t.$t("topbar.welcomePage")),1)]),mainContents:f(()=>[x("div",X,[(r(!0),c(g,null,C(t.window_data,(i,V)=>(r(),c("div",{key:V,class:"w-1/3"},[i.phase!=-1?(r(),c("div",Y,[x("p",Z,p(t.$t(i.title)),1),i.contents!=null?(r(!0),c(g,{key:0},C(t.$t(i.contents).split(`
`),(l,y)=>(r(),c("p",{key:y,class:P(`text-md ${i.textColor}`)},p(l),3))),128)):h("",!0),i.formtype==1?(r(),b(_,{key:1,modelValue:i.formValue,"onUpdate:modelValue":l=>i.formValue=l},null,8,["modelValue","onUpdate:modelValue"])):h("",!0),i.formtype==3?W((r(),c("select",{key:2,"onUpdate:modelValue":l=>i.formValue=l,class:"border-white focus:border-white outline-none focus:ring-transparent transition-colors bg-NormalButtonColor rounded-md w-[90%] mx-auto"},[(r(!0),c(g,null,C(i.choices,(l,y)=>(r(),c("option",{key:y},p(l),1))),128))],8,ee)),[[D,i.formValue]]):h("",!0),[1,2,3].includes(i.formtype)?(r(),c("div",te,[x("button",{onClick:l=>t.WindowButtonClicked(i),class:P("border-winBorder border-white px-4 py-2 rounded-md bg-NormalButtonColor hover:bg-NormalButtonHover transition-colors")},p(t.$t(i.buttonName)),9,se)])):h("",!0)])):h("",!0)]))),128))])]),_:1}),k(T,{"is-window":t.isModal,onModalCancel:s[0]||(s[0]=i=>t.isModal=!1),"can-background-cancel":t.canModalCancel},{default:f(()=>[t.store.getTransState==1?(r(),b(v,{key:0},{default:f(()=>[oe]),_:1})):h("",!0)]),_:1},8,["is-window","can-background-cancel"])],64)}const ue=E(Q,[["render",ae]]);export{ue as default};
