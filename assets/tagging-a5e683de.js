import{d as I,b as p,_,o,g,F as f,i as x,e as i,n as b,t as D,h as C,A as F,r,c as w,w as h,a as v,f as l}from"./index-b77c9346.js";import{T as $}from"./template01-a006ca31.js";import{I as R}from"./Dropable_Image02-ec3043a6.js";import{m as S}from"./mini-Button01-afe0a576.js";const A=I({props:{addClass:String,subItems:Array,nowId:Number},methods:{getTextClass(t){return t==this.nowId?"bg-NormalButtonColor p-1 rounded-sm":"p-1 rounded-sm"},mouseEnterItem(t){const e=t.target;e.children[0].classList.add("left-0"),e.children[0].classList.remove("right-0"),p({targets:e.children[0],width:"100%",easing:"easeOutExpo",duration:300})},mouseLeaveItem(t){const e=t.target;e.children[0].classList.remove("left-0"),e.children[0].classList.add("right-0"),p({targets:e.children[0],width:"0",easing:"easeOutExpo",duration:300})},clickAction(t){this.$emit("click-action",t)}}}),N=["onClick"],L=i("div",{class:"w-0 h-full absolute bg-NormalButtonHover top-0 left-0 z-[-1]"},null,-1),B={key:0,class:"bg-white w-[2px] h-[80%]"};function E(t,e,a,d,k,y){return o(),g("div",{class:b("text-white font-Raleway text-xl flex flex-row justify-start gap-3 items-center select-none "+t.addClass)},[(o(!0),g(f,null,x(t.subItems,(c,n)=>(o(),g(f,{key:n},[i("div",{class:"relative",onMouseenter:e[0]||(e[0]=(...s)=>t.mouseEnterItem&&t.mouseEnterItem(...s)),onMouseleave:e[1]||(e[1]=(...s)=>t.mouseLeaveItem&&t.mouseLeaveItem(...s)),onClick:s=>t.clickAction(n)},[L,i("p",{class:b(t.getTextClass(n))},D(c),3)],40,N),n!=t.subItems.length-1?(o(),g("div",B)):C("",!0)],64))),128))],2)}const V=_(A,[["render",E]]),q=I({components:{"base-tem":$,"row-button":V,"image-item":R,"mini-button":S},data(){return{store:F(),selectingId:[-1],folderId:1,taggingData:{baseFolder:[],afterFolder:[]}}},created(){this.store.IsTaggingDataInit?this.getImageList():this.taggingData=this.store.getTaggingData},unmounted(){this.store.setTaggingData(this.taggingData)},computed:{Image_files(){return this.folderId==0?this.taggingData.baseFolder:this.taggingData.afterFolder}},methods:{rowButtonClick(t){this.folderId=t,this.selectingId=[-1]},clickSelectAll(){this.selectingId=Array.from({length:this.Image_files.length},(t,e)=>e)},readyForTagging(){this.selectingId.forEach(t=>{this.folderId==0?this.taggingData.baseFolder[t].tags.find(e=>e.tagname=="Ready for Tagging")||this.taggingData.baseFolder[t].tags.push({tagname:"Ready for Tagging",tagcolor:"bg-TagColor02"}):this.taggingData.afterFolder[t].tags.find(e=>e.tagname=="Ready for Tagging")||this.taggingData.afterFolder[t].tags.push({tagname:"Ready for Tagging",tagcolor:"bg-TagColor02"})})},notReadyForTagging(){this.selectingId.forEach(t=>{if(this.folderId==0){let e=this.taggingData.baseFolder[t].tags;console.log(e),e=e.filter(a=>a.tagname!="Ready for Tagging"),this.taggingData.baseFolder[t].tags=e}else{let e=this.taggingData.afterFolder[t].tags;e=e.filter(a=>a.tagname!="Ready for Tagging"),this.taggingData.afterFolder[t].tags=e}})},async getImageList(){const t=await this.axios.post("http://localhost:8000/api/processing-images/input-images",{folderName:this.store.getSelectingFolderName});this.taggingData.baseFolder=[],t.data.data_paths.forEach((a,d)=>{this.taggingData.baseFolder.push({image_url:a,tags:[]})});const e=await this.axios.post("http://localhost:8000/api/processing-images/output-input-images",{folderName:this.store.getSelectingFolderName});this.taggingData.afterFolder=[],e.data.data_paths.forEach((a,d)=>{this.taggingData.afterFolder.push({image_url:a,tags:[]})})},async startTagging(){console.log("Start!!!");const e=(await this.axios.post("http://localhost:8000/api/make-textfile/tagging",{taggingData:this.taggingData})).data.message;console.log(e)}}}),z=i("div",{class:"flex flex-row text-center text-lg text-white font-Raleway"},null,-1),M={class:"flex flex-row border-2 border-white rounded-lg p-3"},O={class:"basis-3/4 flex flex-col gap-2"},j={class:"border-2 border-white w-full max-h-[600px] rounded-lg overflow-y-auto grid grid-cols-5 gap-2 p-3 text-white font-Raleway"},H={class:"basis-1/4 flex flex-col gap-12 mt-3"},G={key:0,class:"flex flex-col gap-2"};function J(t,e,a,d,k,y){const c=r("row-button"),n=r("image-item"),s=r("mini-button"),T=r("base-tem");return o(),w(T,null,{maintitle:h(()=>[v("Tagging")]),buttonContents:h(()=>[z]),mainContents:h(()=>[i("div",M,[i("div",O,[l(c,{nowId:t.folderId,subItems:["base dataset folder","after edit folder"],onClickAction:t.rowButtonClick},null,8,["nowId","onClickAction"]),i("div",j,[(o(!0),g(f,null,x(t.Image_files,(m,u)=>(o(),w(n,{key:u,onClick:K=>t.selectingId=[u],id:u,"selected-id":t.selectingId,"tag-data":m.tags,"image-path":String(m.image_url),"folder-name":String(m.image_url).split("\\").slice(-1)[0]},null,8,["onClick","id","selected-id","tag-data","image-path","folder-name"]))),128))])]),i("div",H,[l(s,{"button-name":"Start Tagging","button-color-hover":"bg-ApplyColor","add-class":"text-white font-Raleway text-xl text-center w-[70%] mx-auto",onClick:t.startTagging},null,8,["onClick"]),l(s,{"button-name":"Select All Images","add-class":"text-white font-Raleway text-base text-center w-[70%] mx-auto",onClick:t.clickSelectAll},null,8,["onClick"]),t.selectingId[0]!=-1?(o(),g("div",G,[l(s,{"button-name":"Tag This Image","add-class":"text-white font-Raleway text-base text-center w-[70%] mx-auto",onClick:t.readyForTagging},null,8,["onClick"]),l(s,{"button-name":"Do Not Tag This Image","add-class":"text-white font-Raleway text-base text-center w-[70%] mx-auto",onClick:t.notReadyForTagging},null,8,["onClick"])])):C("",!0)])])]),_:1})}const X=_(q,[["render",J]]);export{X as default};
