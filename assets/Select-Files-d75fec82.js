import{I as C,D as S}from"./ImageItemComp-fc9404f4.js";import{d as D,A as y,g as $,_ as B,r as u,o as r,c as h,k as p,j as w,K as P,h as c,t as v,e as I,F as k,i as _}from"./index-f554547e.js";import{m as N}from"./mini-Button01-ed5526ec.js";import{m as A}from"./mini-Button02-f87e8570.js";import{I as F}from"./Image_window01-96f0c598.js";import{T as E}from"./tag_name-6410ff4f.js";const T=D({setup(e,t){const{selecting_id:m,isMultipleSelect:o,selectingImageDataSet:g,ImageWindowPreview:i,ImageWindowThumbnailPreview:l,PreviewImageSelectLeft:a,PreviewImageSelectRight:d}=C();return{selecting_id:m,isMultipleSelect:o,selectingImageDataSet:g,ImageWindowPreview:i,ImageWindowThumbnailPreview:l,PreviewImageSelectLeft:a,PreviewImageSelectRight:d}},components:{"image-item":S,"mini-button":N,"mini-button02":A,"image-window":F},created(){this.getImageList()},data(){return{store:y(),checkedData:E(),isPreview:!1}},unmounted(){this.store.setImageEditFiles(this.selectingImageDataSet)},methods:{async getImageList(){const e=await this.axios.post($()+"/api/processing-images/input-images",{folderName:this.store.getSelectingFolderName});e.data.error==null?(this.selectingImageDataSet=[],e.data.data_paths.forEach((t,m)=>{const o=this.store.getImageEditFiles.find(i=>i.image_url==t),g=e.data.thumbnail_path[m];o==null?this.selectingImageDataSet.push({image_url:t,thumbnail_path:g,file_name:t.split("\\").slice(-1)[0],tags:[]}):this.selectingImageDataSet.push({image_url:t,thumbnail_path:g,file_name:t.split("\\").slice(-1)[0],tags:o.tags})})):this.store.setErrorMessage(e.data.error)},clickImageItem(e){this.isMultipleSelect?this.selecting_id.includes(e)?this.selecting_id=this.selecting_id.filter(t=>t!=e):this.selecting_id[0]==-1&&this.selecting_id.length==1?this.selecting_id=[e]:this.selecting_id.push(e):(this.selecting_id=[e],this.selecting_id.forEach((t,m)=>{let o=this.selectingImageDataSet[t].tags;this.checkedData.map(i=>i.id).forEach((i,l)=>{this.checkedData[l].checked=o.some(a=>a.tagname==i)})}))},changeCheck(e,t,m){t=m,this.selecting_id.forEach((o,g)=>{let i=this.selectingImageDataSet[o].tags;const l=this.checkedData[e];t?i.find(a=>a.tagname==l.id)==null&&i.push({tagname:l.id,tagcolor:l.color}):i=i.filter(a=>a.tagname!==l.id),i.sort((a,d)=>{const f=this.checkedData.findIndex(n=>n.id==a.tagname),s=this.checkedData.findIndex(n=>n.id==d.tagname);return f-s}),this.selectingImageDataSet[o].tags=i}),this.store.setImageEditFiles(this.selectingImageDataSet)},clickAllItems(){this.selecting_id=Array.from({length:this.selectingImageDataSet.length},(e,t)=>t),this.checkedData.map(e=>e.checked=!1)}}}),L={class:"text-white font-Raleway flex flex-row gap-2"},x={class:"basis-1/4 border-winBorder border-white rounded-lg min-h-[100px] flex flex-col gap-4 p-3"},M={class:"text-lg w-full text-center"},R={key:0,class:"mt-3 w-[80%] mx-auto flex flex-col gap-2"},W={class:"text-center"},V={class:"flex flex-row h-10"},j=["onClick"],H=c("div",{class:"bg-white grow-0 w-[2px]"},null,-1),K=["onClick"],O={class:"basis-3/4 border-winBorder border-white rounded-lg min-h-[100px] max-h-[700px] overflow-y-auto grid grid-cols-4 gap-2 p-3"};function q(e,t,m,o,g,i){const l=u("image-window"),a=u("mini-button"),d=u("mini-button02"),f=u("image-item");return r(),h(k,null,[(r(),p(P,null,[e.isPreview?(r(),p(l,{key:0,onClickLeft:e.PreviewImageSelectLeft,onClickRight:e.PreviewImageSelectRight,onImageWindowCancel:t[0]||(t[0]=s=>e.isPreview=!1),imgsrc:e.ImageWindowPreview,"thumbnail-src":e.ImageWindowThumbnailPreview},null,8,["onClickLeft","onClickRight","imgsrc","thumbnail-src"])):w("",!0)],1024)),c("div",L,[c("div",x,[c("p",M,v(e.$t("CharacterTrimming.SettingsFor")),1),I(a,{"button-name":e.$t("CharacterTrimming.miniButton.AllSelect"),"add-class":"w-[80%] mx-auto text-center",onClickItem:e.clickAllItems},null,8,["button-name","onClickItem"]),I(d,{"is-clicked":e.isMultipleSelect,onClickItem:t[1]||(t[1]=s=>e.isMultipleSelect=!e.isMultipleSelect),"button-name":e.$t("CharacterTrimming.miniButton.MultipleSelect"),"add-class":"w-[80%] mx-auto text-center"},null,8,["is-clicked","button-name"]),e.selecting_id[0]!=-1&&e.selecting_id.length!=0?(r(),h("div",R,[(r(!0),h(k,null,_(e.checkedData,(s,n)=>(r(),h("div",{key:n,class:"flex flex-col justify-start gap-2"},[c("p",W,v(e.$t(s.localName)),1),c("div",V,[c("button",{onClick:b=>e.changeCheck(n,s.checked,!0),class:"bg-NormalButtonColor flex-1 rounded-l-lg border-y-2 border-l-2 border-white hover:bg-ApplyHoverColor active:bg-ApplyActiveColor hover:transition-colors active:transition-none"},"ON",8,j),H,c("button",{onClick:b=>e.changeCheck(n,s.checked,!1),class:"bg-NormalButtonColor flex-1 rounded-r-lg border-y-2 border-r-2 border-white hover:bg-NormalButtonHover active:bg-NormalButtonActive hover:transition-colors active:transition-none"},"OFF",8,K)])]))),128))])):w("",!0),e.selecting_id[0]!=-1&&e.selecting_id.length!=0?(r(),p(a,{key:1,"button-name":e.$t("CharacterTrimming.Priview"),"add-class":"w-[80%] mx-auto text-center",onClickItem:t[2]||(t[2]=s=>e.isPreview=!0)},null,8,["button-name"])):w("",!0)]),c("div",O,[(r(!0),h(k,null,_(e.selectingImageDataSet,(s,n)=>(r(),p(f,{key:n,"tag-data":s.tags,"image-path":s.thumbnail_path,id:n,"selected-id":e.selecting_id,onClick:b=>e.clickImageItem(n),"file-name":s.file_name},null,8,["tag-data","image-path","id","selected-id","onClick","file-name"]))),128))])])],64)}const Y=B(T,[["render",q]]);export{Y as default};
