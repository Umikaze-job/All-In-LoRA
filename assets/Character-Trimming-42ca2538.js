import{d as v,q as _,_ as C,o as c,c as h,F as w,i as y,h as u,n as b,t as I,j as E,m as T,b as M,A as R,g as p,r as i,e as n,w as g,f as V}from"./index-f554547e.js";import{T as S}from"./template01-ba756e31.js";import{m as k}from"./mini-Button01-ed5526ec.js";import{T as d}from"./tag_name-6410ff4f.js";import{m as B}from"./ModalItemComp-d2246648.js";import{m as F}from"./modal-LoadingBar01-b5a3ea64.js";const z=v({props:{addClass:String,subItems:Array,nowId:Number,paths:Array},methods:{getTextClass(e){return e==this.nowId?"bg-NormalButtonColor p-1 rounded-sm":"p-1 rounded-sm"},mouseEnterItem(e){const s=e.target;s.children[0].classList.add("left-0"),s.children[0].classList.remove("right-0"),_({targets:s.children[0],width:"100%",easing:"easeOutExpo",duration:300})},mouseLeaveItem(e){const s=e.target;s.children[0].classList.remove("left-0"),s.children[0].classList.add("right-0"),_({targets:s.children[0],width:"0",easing:"easeOutExpo",duration:300})},gotoPath(e){const s=this.paths[e];this.$router.push({name:s})}}}),A=["onClick"],q=u("div",{class:"w-0 h-full absolute bg-NormalButtonHover top-0 left-0 z-[-1]"},null,-1),O={key:0,class:"bg-white w-[2px] h-[80%]"};function P(e,s,r,o,t,a){return c(),h("div",{class:b("text-white font-Raleway text-xl flex flex-row justify-start gap-3 items-center select-none "+e.addClass)},[(c(!0),h(w,null,y(e.subItems,(f,l)=>(c(),h(w,{key:l},[u("div",{class:"relative cursor-pointer",onMouseenter:s[0]||(s[0]=(...m)=>e.mouseEnterItem&&e.mouseEnterItem(...m)),onMouseleave:s[1]||(s[1]=(...m)=>e.mouseLeaveItem&&e.mouseLeaveItem(...m)),onClick:m=>e.gotoPath(l)},[q,u("p",{class:b(e.getTextClass(l))},I(f),3)],40,A),l!=e.subItems.length-1?(c(),h("div",O)):E("",!0)],64))),128))],2)}const j=C(z,[["render",P]]),D=v({setup(e,s){const{isModal:r,canModalCancel:o,canControl:t}=B();return{isModal:r,canModalCancel:o,canControl:t}},components:{"base-tem":S,"mini-button":k,"button-set":j,"modal-base":T,"modal-window":M,"modal-load":F},data(){return{pathName:["ct-select-files","ct-trimming-setting","ct-output-folder"],store:R(),LoadingValue:{max:0,value:0}}},computed:{getSubPageId(){const e=this.$route.name;return this.pathName.indexOf(e)}},methods:{async startTrimming(){this.isModal=!0,this.canControl(!1);const e=await this.store.getImageEditFiles.filter(t=>t.tags.findIndex(a=>a.tagname==d()[0].id)!=-1).map(t=>({file_name:t.file_name,isResize:t.tags.findIndex(a=>a.tagname==d()[3].id)!=-1})),s=await this.store.getImageEditFiles.filter(t=>t.tags.findIndex(a=>a.tagname==d()[1].id)!=-1).map(t=>({file_name:t.file_name,isResize:t.tags.findIndex(a=>a.tagname==d()[3].id)!=-1})),r=await this.store.getImageEditFiles.filter(t=>t.tags.findIndex(a=>a.tagname==d()[2].id)!=-1).map(t=>({file_name:t.file_name,isResize:t.tags.findIndex(a=>a.tagname==d()[3].id)!=-1}));if(this.LoadingValue={max:0,value:0},this.LoadingValue.max=e.length+s.length+r.length,this.LoadingValue.max==0){this.store.setErrorMessage("None of the images have tags."),this.isModal=!1;return}let o=!1;for(const t of e){const a=await this.axios.post(p()+"/api/processing-images/start-trimming",{folderName:this.store.getSelectingFolderName,fileName:t.file_name,setting:this.store.getImageEditSetting,isResize:t.isResize,type:"Character"});if(a.data.error==null)this.LoadingValue.value+=1;else{this.isModal=!1,this.store.setErrorMessage(a.data.error),o=!0;break}}if(o==!1)for(const t of s){const a=await this.axios.post(p()+"/api/processing-images/start-trimming",{folderName:this.store.getSelectingFolderName,fileName:t.file_name,setting:this.store.getImageEditSetting,isResize:t.isResize,type:"Face"});if(a.data.error==null)this.LoadingValue.value+=1;else{this.isModal=!1,o=!0,this.store.setErrorMessage(a.data.error);break}}if(o==!1)for(const t of r){const a=await this.axios.post(p()+"/api/processing-images/start-trimming",{folderName:this.store.getSelectingFolderName,fileName:t.file_name,setting:this.store.getImageEditSetting,isResize:t.isResize,type:"Body"});if(a.data.error==null)this.LoadingValue.value+=1;else{this.isModal=!1,o=!0,this.store.setErrorMessage(a.data.error);break}}this.canControl(!0),this.isModal=!1}}}),H={class:"flex flex-row text-center text-lg text-white font-Raleway"},U={class:"basis-1/2 flex flex-row justify-end"},W=u("p",{class:"text-center text-xl underline decoration-myUnderLine01 py-8"},"Loading...",-1);function G(e,s,r,o,t,a){const f=i("button-set"),l=i("mini-button"),m=i("RouterView"),N=i("base-tem"),L=i("modal-load"),$=i("modal-window"),x=i("modal-base");return c(),h(w,null,[n(N,null,{maintitle:g(()=>[V(I(e.$t("topbar.EditImages.ManipulatingImages")),1)]),buttonContents:g(()=>[u("div",H,[n(f,{paths:e.pathName,"now-id":e.getSubPageId,"add-class":"basis-1/2","sub-items":[e.$t("CharacterTrimming.RowButtons.TagsToFile"),e.$t("CharacterTrimming.RowButtons.Setting"),e.$t("CharacterTrimming.RowButtons.OutputFolder")]},null,8,["paths","now-id","sub-items"]),u("div",U,[n(l,{onClick:e.startTrimming,addClass:"ml-2",buttonName:e.$t("CharacterTrimming.Trimming"),"button-color-hover":"bg-ApplyColor"},null,8,["onClick","buttonName"])])])]),mainContents:g(()=>[n(m,{name:"subView"})]),_:1}),n(x,{"is-window":e.isModal,"can-background-cancel":e.canModalCancel},{default:g(()=>[n($,null,{default:g(()=>[W,n(L,{"value-max":e.LoadingValue.max,"now-value":e.LoadingValue.value},null,8,["value-max","now-value"])]),_:1})]),_:1},8,["is-window","can-background-cancel"])],64)}const ee=C(D,[["render",G]]);export{ee as default};
