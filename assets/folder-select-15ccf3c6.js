import{d as w,A as F,m as $,a as T,b as B,g as m,_ as D,r as c,o,c as n,e as a,w as d,F as b,f as A,t as l,h as s,j as i,i as E,k as f}from"./index-09c46877.js";import{T as _}from"./template01-92276447.js";import{I as V}from"./Dropable_Image01-ff3e6a7b.js";import{m as L}from"./mini-Button01-fadaf757.js";import{m as U}from"./modal-textform01-a307623e.js";const j=w({data(){return{store:F(),folder_set:[{foldername:"",thumbnail_path:"",folderid:""}],selectId:-1,isWindow:!1,canModalClose:!0,modalFormName:"",taskId:0,errorId:0,PlannedInsertionThumbnail:null}},created(){this.folder_set=[]},async mounted(){await this.getFolderSet()},components:{"base-tem":_,Img_Comp01:V,"mini-button":L,"modal-base":$,"modal-button":T,"modal-form":U,"modal-window":B},computed:{selectingFolderName(){return String(this.folder_set[this.selectId].foldername)},selectginFolderData(){return this.folder_set[this.selectId]}},methods:{InputThumbnailImage(){const e=this.$refs.thumbnail.files[0];if(e){const t=new FileReader;t.onload=()=>{this.PlannedInsertionThumbnail=t.result},t.readAsDataURL(e)}else this.PlannedInsertionThumbnail=null},clickMiniButton(e){this.taskId=e,this.isWindow=!0},async ApplyModalButtonClick(e){if(e==0&&this.taskId==0&&this.modalFormName!=""){this.store.setTransState(1),this.canModalClose=!1;const t=await this.axios.post(m()+"/api/folder-select/create",{name:this.modalFormName});"error"in t.data?(this.store.setErrorMessage(t.data.error),this.store.setTransState(0),this.canModalClose=!0,this.modalClose()):"Duplicate"in t.data?(this.errorId=2,this.store.setTransState(0),this.canModalClose=!0):(await this.getFolderSet(),this.store.setTransState(0),this.canModalClose=!0,this.modalClose())}else if(e==0&&this.taskId==1&&this.modalFormName!=""){this.store.setTransState(1),this.canModalClose=!1;const t=await this.axios.post(m()+"/api/folder-select/rename",{beforeName:this.selectingFolderName,afterName:this.modalFormName,folderid:this.selectginFolderData.folderid});t.data.message==null?(t.data.error=="Duplicate names"?this.errorId=2:(this.store.setErrorMessage(t.data.error),this.modalClose()),this.store.setTransState(0),this.canModalClose=!0):(await this.getFolderSet(),this.store.setTransState(0),this.canModalClose=!0,this.modalClose(),this.store.setSelectingFolderName("",""))}else if(e==0&&this.taskId==2){const t=this.$refs.thumbnail;if(t.files[0]!=null){this.store.setTransState(1),this.canModalClose=!1;const u=new FormData;u.append("folderName",String(this.selectginFolderData.folderid)),u.append("image",t.files[0]);const p=await this.axios.post(m()+"/api/folder-select/thumbnail",u,{headers:{"Content-Type":"multipart/form-data"}});p.data.error==null?(await this.getFolderSet(),this.store.setTransState(0),this.canModalClose=!0,this.modalClose()):(this.store.setErrorMessage(p.data.error),this.store.setTransState(0),this.canModalClose=!0,this.modalClose())}else this.errorId=3}else if(e==0&&this.taskId==3){this.store.setTransState(1),this.canModalClose=!1;const t=await this.axios.post(m()+"/api/folder-select/delete",{folderName:this.selectginFolderData.folderid});t.data.error==null?(await this.getFolderSet(),this.store.setTransState(0),this.store.setSelectingFolderName("",""),this.canModalClose=!0,this.modalClose()):(this.store.setErrorMessage(t.data.error),this.store.setTransState(0),this.canModalClose=!0,this.modalClose())}else e==0&&this.modalFormName==""?this.errorId=1:e==1&&this.modalClose()},modalClose(){this.modalFormName="",this.isWindow=!1,this.errorId=0,this.PlannedInsertionThumbnail=null},async RevertButtonClick(e){this.store.setSelectingFolderName("",""),await this.axios.post(m()+"/api/folder-select/set-folder-name",{folderName:""})},async ApplyButtonClick(e){this.store.setSelectingFolderName(this.selectginFolderData.foldername,this.selectginFolderData.folderid),await this.axios.post(m()+"/api/folder-select/set-folder-name",{folderName:this.selectingFolderName,folderId:this.selectginFolderData.folderid})},async getFolderSet(){const e=await this.axios.post(m()+"/api/folder-select/get-folders");if(e.data.error==null){this.folder_set=[];const t=e.data.directoriesName,u=e.data.thumbnail,p=e.data.directoriesId;t.forEach((N,I)=>{this.folder_set.push({foldername:N,thumbnail_path:u[I],folderid:p[I]})})}else this.store.setErrorMessage(e.data.error)}}}),R={class:"flex flex-row text-center text-lg text-white font-Raleway"},P={class:"basis-1/4 flex flex-row justify-left"},W={class:"basis-1/2 flex flex-row justify-center"},q={class:"basis-1/4 flex flex-row justify-end"},H={class:"grid 2xl:grid-cols-7 xl:grid-cols-6 lg:grid-cols-5 md:grid-cols-4 gap-4 text-white font-Raleway"},z={class:"text-center text-xl underline decoration-myUnderLine01 py-3"},G={class:"text-center text-lg"},J={key:0,class:"text-center text-lg text-red-400"},K={key:1,class:"text-center text-lg text-red-400"},O={class:"text-center text-xl underline decoration-myUnderLine01 py-3"},Q={class:"text-center text-lg"},X={key:0,class:"text-center text-lg text-red-400"},Y={key:1,class:"text-center text-lg text-red-400"},Z={key:2,class:"text-center text-lg text-red-400"},x={class:"text-center text-xl underline decoration-myUnderLine01 py-3"},ee={class:"text-center text-lg"},te={key:0,class:"text-center text-lg text-red-400"},oe={key:1,class:"flex justify-center items-center h-[150px]"},se=["src"],le={class:"text-center text-xl underline decoration-myUnderLine01 py-3"},ae={class:"text-center text-lg"},re=s("p",{class:"text-center text-xl underline decoration-myUnderLine01 py-8"},"Loading...",-1);function ne(e,t,u,p,N,I){const h=c("mini-button"),y=c("Img_Comp01"),v=c("base-tem"),S=c("modal-form"),C=c("modal-button"),g=c("modal-window"),M=c("modal-base");return o(),n(b,null,[a(v,null,{maintitle:d(()=>[A(l(e.$t("topbar.folderSelect")),1)]),buttonContents:d(()=>[s("div",R,[s("div",P,[a(h,{onClickItem:t[0]||(t[0]=r=>e.clickMiniButton(0)),buttonName:e.$t("folderSelect.buttonName.create"),"button-color-hover":"bg-ApplyColor"},null,8,["buttonName"])]),s("div",W,[e.selectId!=-1?(o(),n(b,{key:0},[a(h,{onClickItem:t[1]||(t[1]=r=>e.clickMiniButton(1)),buttonName:e.$t("folderSelect.buttonName.rename"),addClass:"ml-2"},null,8,["buttonName"]),a(h,{onClickItem:t[2]||(t[2]=r=>e.clickMiniButton(2)),buttonName:e.$t("folderSelect.buttonName.thumbnail"),addClass:"ml-2"},null,8,["buttonName"]),a(h,{onClickItem:t[3]||(t[3]=r=>e.clickMiniButton(3)),"button-color-hover":"bg-DeleteColor",buttonName:e.$t("folderSelect.buttonName.delete"),addClass:"ml-2"},null,8,["buttonName"])],64)):i("",!0)]),s("div",q,[e.selectId!=-1?(o(),n(b,{key:0},[a(h,{onClick:e.RevertButtonClick,buttonName:e.$t("folderSelect.buttonName.revert"),addClass:"ml-2"},null,8,["onClick","buttonName"]),a(h,{onClick:e.ApplyButtonClick,buttonName:e.$t("folderSelect.buttonName.apply"),addClass:"ml-2","button-color-hover":"bg-ApplyColor"},null,8,["onClick","buttonName"])],64)):i("",!0)])])]),mainContents:d(()=>[s("div",H,[(o(!0),n(b,null,E(e.folder_set,(r,k)=>(o(),f(y,{key:k,"image-path":r.thumbnail_path,fileName:r.foldername,id:k,"selected-id":e.selectId,onClick:ie=>e.selectId=k},null,8,["image-path","fileName","id","selected-id","onClick"]))),128))])]),_:1}),a(M,{"is-window":e.isWindow,onModalCancel:t[7]||(t[7]=r=>e.isWindow=!1),"can-background-cancel":e.canModalClose},{default:d(()=>[e.store.getTransState==0&&e.taskId==0?(o(),f(g,{key:0},{default:d(()=>[s("p",z,l(e.$t("folderSelect.modalMessage.create.title")),1),s("p",G,l(e.$t("folderSelect.modalMessage.create.contents")),1),e.errorId==1?(o(),n("p",J,l(e.$t("folderSelect.modalErrorMessage.noInput")),1)):i("",!0),e.errorId==2?(o(),n("p",K,l(e.$t("folderSelect.modalErrorMessage.duplicateName")),1)):i("",!0),a(S,{modelValue:e.modalFormName,"onUpdate:modelValue":t[4]||(t[4]=r=>e.modalFormName=r)},null,8,["modelValue"]),a(C,{onClickItem:e.ApplyModalButtonClick,"button-porps":[{name:"Create",hoverColor:"hover:bg-ApplyColor"},{name:"Cancel",hoverColor:"hover:bg-NormalButtonHover"}]},null,8,["onClickItem"])]),_:1})):e.store.getTransState==0&&e.taskId==1?(o(),f(g,{key:1},{default:d(()=>[s("p",O,l(e.$t("folderSelect.modalMessage.rename.title")),1),s("p",Q,l(e.$t("folderSelect.modalMessage.rename.contents",{folderName:e.folder_set[e.selectId].foldername})),1),e.errorId==1?(o(),n("p",X,l(e.$t("folderSelect.modalErrorMessage.noInput")),1)):i("",!0),e.errorId==2?(o(),n("p",Y,l(e.$t("folderSelect.modalErrorMessage.duplicateName")),1)):i("",!0),e.errorId==-1?(o(),n("p",Z,l(e.$t("folderSelect.modalErrorMessage.someError")),1)):i("",!0),a(S,{modelValue:e.modalFormName,"onUpdate:modelValue":t[5]||(t[5]=r=>e.modalFormName=r)},null,8,["modelValue"]),a(C,{onClickItem:e.ApplyModalButtonClick,"button-porps":[{name:"Rename",hoverColor:"hover:bg-ApplyColor"},{name:"Cancel",hoverColor:"hover:bg-NormalButtonHover"}]},null,8,["onClickItem"])]),_:1})):e.store.getTransState==0&&e.taskId==2?(o(),f(g,{key:2},{default:d(()=>[s("p",x,l(e.$t("folderSelect.modalMessage.thumbnail.title")),1),s("p",ee,l(e.$t("folderSelect.modalMessage.thumbnail.contents",{folderName:e.folder_set[e.selectId].foldername})),1),e.errorId==3?(o(),n("p",te,l(e.$t("folderSelect.modalErrorMessage.noImage")),1)):i("",!0),s("input",{onChange:t[6]||(t[6]=(...r)=>e.InputThumbnailImage&&e.InputThumbnailImage(...r)),class:"mx-auto text-center",type:"file",ref:"thumbnail",accept:".jpg, .jpeg, .png, .webp, .bmp"},null,544),e.PlannedInsertionThumbnail!=null?(o(),n("div",oe,[s("img",{class:"max-w-full max-h-full",src:e.PlannedInsertionThumbnail,alt:"",srcset:""},null,8,se)])):i("",!0),a(C,{onClickItem:e.ApplyModalButtonClick,"button-porps":[{name:"Change",hoverColor:"hover:bg-ApplyColor"},{name:"Cancel",hoverColor:"hover:bg-NormalButtonHover"}]},null,8,["onClickItem"])]),_:1})):e.store.getTransState==0&&e.taskId==3?(o(),f(g,{key:3},{default:d(()=>[s("p",le,l(e.$t("folderSelect.modalMessage.delete.title")),1),s("p",ae,l(e.$t("folderSelect.modalMessage.delete.contents",{folderName:e.folder_set[e.selectId].foldername})),1),a(C,{onClickItem:e.ApplyModalButtonClick,"button-porps":[{name:"Delete",hoverColor:"hover:bg-DeleteColor"},{name:"Cancel",hoverColor:"hover:bg-NormalButtonHover"}]},null,8,["onClickItem"])]),_:1})):e.store.getTransState==1?(o(),f(g,{key:4},{default:d(()=>[re]),_:1})):i("",!0)]),_:1},8,["is-window","can-background-cancel"])],64)}const fe=D(j,[["render",ne]]);export{fe as default};
